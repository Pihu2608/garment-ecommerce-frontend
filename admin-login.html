<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  
<section class="section" style="max-width:400px;margin:auto;">
  <h2>üîê Admin Login</h2>

  <input
    type="email"
    id="email"
    placeholder="Admin Email"
    style="width:100%;padding:10px;margin:10px 0;"
  />

  <input
    type="password"
    id="password"
    placeholder="Password"
    style="width:100%;padding:10px;margin:10px 0;"
  />

  <!-- ‚úÖ FIXED BUTTON -->
  <button onclick="loginAdmin()" style="width:100%;padding:10px;">
    Login
  </button>

  <p id="error" style="color:red;margin-top:10px;"></p>
</section>

<script>
const API_BASE =
  "https://garment-ecommerce-backend-production.up.railway.app";

async function loginAdmin() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;

  try {
    const res = await fetch(`${API_BASE}/api/admin/auth/login`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ email, password }),
    });

    const data = await res.json();

    if (!res.ok) {
      document.getElementById("error").innerText =
        data.message || "Login failed";
      return;
    }

    // ‚úÖ Save JWT
    localStorage.setItem("adminToken", data.token);

    // ‚úÖ Redirect to admin panel
    window.location.href = "admin.html";
  } catch (err) {
    console.error(err);
    document.getElementById("error").innerText =
      "Server error. Try again.";
  }
}
</script>

</body>
</html>

